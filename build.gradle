plugins {
    id 'java'
    id 'org.jetbrains.kotlin.jvm' version '1.9.25'
    id 'org.jetbrains.intellij' version '1.17.4'
}

group = 'site.hnfy258'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

// Configure Gradle IntelliJ Plugin
intellij {
    version = '2024.1.7'
    type = 'IC' // Target IDE Platform
    plugins = ['com.intellij.java']
}
dependencies {
    implementation 'net.sourceforge.plantuml:plantuml:1.2023.10'
}

// The correct way to configure tasks in Groovy DSL
compileJava {
    sourceCompatibility = '17'
    targetCompatibility = '17'
}

compileKotlin {
    kotlinOptions.jvmTarget = '17'
}

patchPluginXml {
    sinceBuild = '241'
    untilBuild = '243.*'
}

signPlugin {
    certificateChain = System.getenv('CERTIFICATE_CHAIN')
    privateKey = System.getenv('PRIVATE_KEY')
    password = System.getenv('PRIVATE_KEY_PASSWORD')
}

publishPlugin {
    token = System.getenv('PUBLISH_TOKEN')
}
